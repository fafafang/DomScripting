function addLoadEvent(a){let oldFunc=window.onload;if(typeof oldFunc!="function"){window.onload=a}else{window.onload=function(){oldFunc();a()}}}function insertAfter(b,a){let parent=a.parentNode;if(parent.lastChild==a){parent.appendChild(b)}else{parent.insertBefore(b,a.nextSibling)}}function addClass(a,b){if(!a.className){a.className=b}else{a.className+=" "+b}}function highlightPage(){if(!document.getElementsByTagName){return}let headers=document.getElementsByTagName("header");if(headers.length==0){return}let navs=headers[0].getElementsByTagName("nav");if(navs.length==0){return}let links=navs[0].getElementsByTagName("a");for(let i=0;i<links.length;i++){let link=links[i];let url=link.getAttribute("href");if(window.location.href.indexOf(url)!=-1){link.className="here";document.body.id=link.lastChild.nodeValue.toLowerCase()}}}function moveElement(d,c,b,a){if(!document.getElementById){return}if(!document.getElementById(d)){return}let elem=document.getElementById(d);if(elem.movement){clearTimeout(elem.movement)}if(!elem.style.left){elem.style.left="0px"}if(!elem.style.top){elem.style.top="0px"}let posX=parseInt(elem.style.left);let posY=parseInt(elem.style.top);let dest=0;if(posX<c){dest=Math.ceil((c-posX)/10);posX+=dest}if(posX>c){dest=Math.ceil((posX-c)/10);posX-=dest}if(posY<b){dest=Math.ceil((b-posY)/10);posX+=dest}if(posY>b){dest=Math.ceil((posY-b)/10);posX-=dest}elem.style.left=posX+"px";elem.style.top=posY+"px";let repeat="moveElement('"+d+"',"+c+","+b+","+a+")";elem.movement=setTimeout(repeat,a)}function showSection(a){if(!document.getElementsByTagName){return}let sections=document.getElementsByTagName("section");for(let i=0;i<sections.length;i++){let section=sections[i];if(section.getAttribute("id")!=a){section.style.display="none"}else{section.style.display="block"}}}function prepareInternalNav(){if(!document.getElementsByTagName){return}let articles=document.getElementsByTagName("article");if(articles.length==0){return}let navs=articles[0].getElementsByTagName("nav");if(navs.length==0){return}let links=navs[0].getElementsByTagName("a");if(links.length==0){return}for(let i=0;i<links.length;i++){let link=links[i];let sectionId=link.getAttribute("href").split("#")[1];document.getElementById(sectionId).style.display="none";link.destination=sectionId;link.onclick=function(){showSection(this.destination);return}}}function stripeTables(){if(!document.getElementsByTagName){return}let tables=document.getElementsByTagName("table");if(tables.length==0){return}for(let i=0;i<tables.length;i++){let table=tables[i];let rows=table.getElementsByTagName("tr");let odd=false;for(let i=0;i<rows.length;i++){let row=rows[i];if(odd){addClass(row,"oddRow")}odd=!odd}}}function highlightRows(){if(!document.getElementsByTagName){return}let rows=document.getElementsByTagName("tr");for(let i=0;i<rows.length;i++){let row=rows[i];row.oldClassName=row.className;row.onmouseover=function(){addClass(this,"highlight")};row.onmouseout=function(){row.className=row.oldClassName}}}function displayAbbreviations(){if(!document.getElementsByTagName){return}if(!document.createElement||!document.createTextNode){return}let abbreviations=document.getElementsByTagName("abbr");if(abbreviations.length==0){return}let header=document.createElement("h2");let headerText=document.createTextNode("Abbreviations");header.appendChild(headerText);let dList=document.createElement("dl");for(let i=0;i<abbreviations.length;i++){let abbr=abbreviations[i];let dTitle=document.createElement("dt");let dTitleText=document.createTextNode(abbr.lastChild.nodeValue);dTitle.appendChild(dTitleText);let desc=document.createElement("dd");let descText=document.createTextNode(abbr.getAttribute("title"));desc.appendChild(descText);dList.appendChild(dTitle);dList.appendChild(desc)}let article=document.getElementsByTagName("article")[0];article.appendChild(header);article.appendChild(dList)}function focusLabels(){let labels=document.getElementsByTagName("label");if(labels.length==0){return}for(let i=0;i<labels.length;i++){let label=labels[i];if(!label.getAttribute("for")){continue}let elemId=label.getAttribute("for");if(!document.getElementById(elemId)){continue}let elem=document.getElementById(elemId);elem.focus()}}function resetFields(a){if(Modernizr.input.placeholder){return}let elements=a.elements;for(let i=0;i<elements.length;i++){let element=elements[i];if(element.type=="submit"){continue}let check=element.placeholder||element.getAttribute("placeholder");if(!check){continue}element.onfocus=function(){let text=element.placeholder||element.getAttribute("placeholder");if(this.value==text){this.className="";this.value=""}};element.onblur=function(){if(this.value==""){this.className="placeholder";this.value=element.placeholder||element.getAttribute("placeholder")}};element.onblur()}}function prepareForms(){let forms=document.getElementsByTagName("form");if(forms.length==0){return}for(let i=0;i<forms.length;i++){let form=forms[i];resetFields(form);form.onsubmit=function(){if(!validateForm(this)){return false}let article=document.getElementsByTagName("article")[0];if(submitFormWithAjax(this,article)){return false}return true}}}function isFilled(a){if(a.value.replace(" ","").length==0){return false}let placeholder=a.placeholder||a.getAttribute("placeholder");return(a.value!=placeholder)}function isEmail(a){return a.value.indexOf("@")&&a.value.indexOf(".")}function validateForm(a){for(let i=0;i<a.elements.length;i++){let element=a.elements[i];if(element.getAttribute("required")){if(!isFilled(element)){alert("Please fill in the "+element.name+" field");return false}}if(element.type=="email"){if(!isEmail(element)){alert("The "+element.name+" field must be a valid email address");return false}}}return true}function getHttpObject(){if(typeof XMLHttpRequest==undefined){XMLHttpRequest=function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(a){}}}return new XMLHttpRequest()}function displayAjaxLoading(a){while(a.hasChildNodes()){a.removeChild(a.lastChild)}let loadingPic=document.createElement("img");loadingPic.setAttribute("src","images/loading.gif");loadingPic.setAttribute("alt","loading");a.appendChild(loadingPic)}function submitFormWithAjax(a,b){let request=getHttpObject();if(!request){return false}displayAjaxLoading(b);let dataParts=[];for(let i=0;i<a.elements.length;i++){let element=a.elements[i];dataParts.push(element.name+" "+encodeURIComponent(element.value))}let data=dataParts.join("&");request.open("post",a.getAttribute("action"),true);request.setRequestHeader("Content-type","application/x-www-form-urlencoded");request.onreadystatechange=function(){if(request.readyState==4){if(request.status==200||request.status==0){let matches=request.responseText.match(/<article>([\s\S]+)<\/article>/);if(matches.length>0){b.innerHTML=matches[1]}else{b.innerHTML="<p>Oops, there was an error. Sorry.</p>"}}else{b.innerHTML="<p>"+request.statusText+"</p>"}}};request.send(data);return true}addLoadEvent(highlightPage);addLoadEvent(prepareInternalNav);addLoadEvent(stripeTables);addLoadEvent(highlightRows);addLoadEvent(displayAbbreviations);addLoadEvent(focusLabels);addLoadEvent(prepareForms);